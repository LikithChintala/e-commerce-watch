<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="./styles/quick-view-style.css">
        <link rel="stylesheet" href="./styles/navbar-style.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
        <script>
            $(document).ready(function(){
              $('.slider').bxSlider();
            });
            
            
          </script>      
    </head>
    <body>
        <header>

        <nav class="navigation">
            <a href="./home.html" class="brand-name">
              Watch zone
            </a>
            <button
              class="hamburger"
              
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 20 20"
                fill="white"
              >
                <path
                  fillRule="evenodd"
                  d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z"
                  clipRule="evenodd"
                />
              </svg>
            </button>
            <div
              class="navigation-menu"
            >
            <ul>
               
              <li>
                    Welcome, <span id="userName"></span>
                </li>
              <li>
                <a href="cart.html">
                  <img src="./images/shopping-cart.png" alt="Shopping-cart" height="24" width="24"/>
                </a>
                <span id="cart_count"></span>
              </li>
              <li>
                <div onclick="logOut()">
                  <img src="./images/logout.png" alt="logout" height="24" width="24"/>
                </div>
              </li>
            </ul>
            </div>
          </nav>
        </header>
        <main>
            <ul class="breadcrumb">
                <li><a href="home.html">Home</a></li>
                <li class="active">Quick view</li>
              </ul>
            <div class="quick-view-page__container">
                
                <div class="quick-view-page-left__container">
                        <div class="slider__container">
                            <div class="slider">
                                <img src="images/SKW3052_1.jpeg" alt="slider image"  class="product-detail-slider-image" >
                                <img src="images/SKW3052_2.jpeg" alt="slider image" class="product-detail-slider-image" >
                                <img src="images/SKW3052_3.jpeg" alt="slider image" class="product-detail-slider-image" >
                                <img src="images/SKW3052_4.jpeg" alt="slider image" class="product-detail-slider-image" >
                              </div>
                        </div>
                </div>
                <div class="quick-view-page-right__container">
                    
                    <div class="product-detail_header">
                        <img src="images/skagen_logo.png" alt="skagen logo" class="product-detail-brand-logo">
                        <h1 class="product-name">Grenen Lille Three-Hand Date Sand Eco Leather Watch</h1>    
                    </div>
                    <div id="rating-container">
                        <div class="rating" data-rating="1" >★</div>
                        <div class="rating" data-rating="2" >★</div>
                        <div class="rating" data-rating="3" >★</div>
                        <div class="rating" data-rating="4" >★</div>
                        <div class="rating" data-rating="5" >★</div>
                         &nbsp; 0 Reviews
                      </div>

                      <div>$ 300</div>
                    <hr class="mt-4">
                    <button class="add-to-bag__button" onclick="addToCart()">Add to bag</button>
                    <hr class="mt-4">
                    <div class="description-and-detail">
                        <div class="top-attributes">
                        <h2 class="col-12 title detail-panel-title">Product Details</h2>
                        <div class="attribute">
                        <span class="label">Sku:</span> <span class="value">SKW3052</span>
                        </div>
                        <div class="attribute">
                        <span class="label">Case Size:</span> <span class="value">26 mm</span>
                        </div>
                        <div class="attribute">
                        <span class="label">Movement:</span> <span class="value">Three Hand Date</span>
                        </div>
                        <div class="attribute">
                        <span class="label">Platform:</span> <span class="value">GRENEN LILLE</span>
                        </div>
                        <div class="attribute">
                        <span class="label">Strap Material:</span> <span class="value">Eco Leather</span>
                        </div>
                        <div class="attribute">
                        <span class="label">Water Resistance:</span> <span class="value">3 ATM</span>
                        </div>
                        <div class="attribute">
                        <span class="label">Case Material:</span> <span class="value">At Least 50% Recycled Stainless Steel</span>
                        </div>
                        <div class="attribute view-more-attribute show">
                        <span class="label">Case Color:</span> <span class="value">Rose Gold</span>
                        </div>
                        <div class="attribute view-more-attribute show">
                        <span class="label">Dial Colour:</span> <span class="value">Greystone</span>
                        </div>
                        <div class="attribute view-more-attribute show">
                        <span class="label">Strap Width:</span> <span class="value">16 mm</span>
                        </div>
                        <div class="attribute view-more-attribute show">
                        <span class="label">Closure:</span> <span class="value">Single Prong Strap Buckle</span>
                        </div>
                        <div class="attribute view-more-attribute show">
                        <span class="label">Strap Inner Circumference:</span> <span class="value">175 +/- 5 mm</span>
                        </div>
                        <div class="attribute view-more-attribute show">
                        <span class="label">Battery Type:</span> <span class="value">SR621SW</span>
                        </div>
                      
                        </div>
                        </div>
                </div>
            </div>
        </main>
        <script>
          
        window.addEventListener('load', function () {
                let loggedIn =  localStorage.getItem('loggedInUser');
                var userName = loggedIn.split('@')[0];
                document.getElementById("userName").innerHTML = userName;
                let userData = JSON.parse(localStorage.getItem('userData')) || [];
                let cartItems = userData.length && JSON.parse(localStorage.getItem('userData')).find(o => o.email == loggedIn)?.cart;
                console.log("cart items",cartItems)
                document.getElementById("cart_count").innerHTML = cartItems?.length;

                
          
        
        })
        function logOut() {
          localStorage.setItem('loggedInUser', "");
          window.location.href = './index.html'

        }

        function addToCart(){
          let loggedIn =  localStorage.getItem('loggedInUser');
          let userData = JSON.parse(localStorage.getItem('userData')) || [];
          let cartItems = userData.length && JSON.parse(localStorage.getItem('userData')).find(o => o.email == loggedIn)?.cart;
          console.log("cart items",cartItems)
          cartItems.push({
            imageUrl:'images/skagen_logo.png',
            name:'Grenen Lille Three-Hand Date Sand Eco Leather Watch',
            price:'300',
          })
          let temp = [];
          JSON.parse(localStorage.getItem('userData')).forEach(o => {
            if(o.email == loggedIn){
                o['cart'] = cartItems
                temp.push(o);
              }
              else{
                temp.push(o);
              }
            })
            localStorage.setItem('userData', JSON.stringify(temp));
            window.location.reload();

        }
        </script>
 
        </body>
</html>
